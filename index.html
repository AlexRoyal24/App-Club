<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MiniRed Social</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background: #000;
      color: #fff;
      overflow-x: hidden;
      animation: fadeIn 1.5s ease-in;
    }

    @keyframes fadeIn { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }
    @keyframes fadeOut { from {opacity:1; transform:translateY(0);} to {opacity:0; transform:translateY(20px);} }

    /* Historias */
    .stories { display:flex; gap:15px; overflow-x:auto; padding:15px; background:#111; border-bottom:1px solid #333; position:fixed; top:0; width:100%; z-index:10; }
    .story { flex:0 0 auto; text-align:center; cursor:pointer; }
    .story img { width:60px; height:60px; border-radius:50%; border:3px solid #00f; object-fit:cover; }
    .story p { font-size:12px; margin-top:5px; }

    /* Feed estilo TikTok */
    .feed { height:100vh; overflow-y:scroll; scroll-snap-type:y mandatory; margin-top:100px; margin-bottom:60px; }
    .post { position:relative; height:100vh; display:flex; align-items:center; justify-content:center; scroll-snap-align:start; background:#111; }
    .post video, .post img { width:100%; height:100%; object-fit:cover; cursor:pointer; }
    .post .info { position:absolute; bottom:120px; left:20px; font-size:18px; background:rgba(0,0,0,0.5); padding:5px 10px; border-radius:5px; }

    /* Botones de interacci√≥n */
    .actions { position:absolute; right:20px; bottom:120px; display:flex; flex-direction:column; gap:20px; align-items:center; }
    .actions button { background:rgba(0,0,0,0.6); border:none; border-radius:50%; width:50px; height:50px; font-size:22px; color:#fff; cursor:pointer; transition:0.2s; }
    .actions button:hover { background:#00f; transform:scale(1.2); }

    /* Navbar */
    nav { position:fixed; bottom:0; width:100%; background:rgba(0,0,0,0.9); display:flex; justify-content:space-around; padding:10px 0; border-top:1px solid #333; z-index:20; }
    nav a { color:#fff; text-decoration:none; font-size:20px; transition:transform 0.2s; }
    nav a:hover { transform:scale(1.2); }

    /* Modal login */
    .modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:flex; align-items:center; justify-content:center; opacity:0; pointer-events:none; transition:opacity 0.5s ease; z-index:30; }
    .modal.active { opacity:1; pointer-events:all; }
    .modal-content { background:#111; padding:30px; border-radius:10px; text-align:center; width:300px; animation:popUp 0.5s ease; }
    @keyframes popUp { from {transform:scale(0.7);opacity:0;} to {transform:scale(1);opacity:1;} }
    .modal input { width:90%; padding:10px; margin:8px 0; border:none; border-radius:5px; outline:none; }
    button { margin-top:10px; padding:10px 20px; border:none; border-radius:5px; background:#00f; color:white; cursor:pointer; transition:0.3s; }
    button:hover { background:#3366ff; }

    /* Modal historias */
    .story-modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); display:flex; align-items:center; justify-content:center; opacity:0; pointer-events:none; transition:opacity 0.5s ease; z-index:40; }
    .story-modal.active { opacity:1; pointer-events:all; }
    .story-modal img { max-width:90%; max-height:90%; border-radius:10px; }

    /* Modal reels */
    .reel-modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); display:flex; align-items:center; justify-content:center; opacity:0; pointer-events:none; transition:opacity 0.5s ease; z-index:50; }
    .reel-modal.active { opacity:1; pointer-events:all; }
    .reel-modal video { width:100%; height:100%; object-fit:cover; }

    /* Bot√≥n cerrar */
    .close-btn { position:absolute; top:20px; right:20px; background:#00f; border:none; padding:10px 15px; border-radius:5px; cursor:pointer; color:#fff; }

    /* Chat */
    .chat-btn { position:fixed; top:15px; right:15px; background:#00f; border:none; padding:10px 15px; border-radius:50px; cursor:pointer; z-index:60; }
    .chat-modal { position:fixed; top:60px; right:15px; width:300px; max-height:400px; background:#111; border:1px solid #333; border-radius:10px; overflow-y:auto; display:none; z-index:70; }
    .chat-modal.active { display:block; }
    .chat-modal input { width:80%; padding:5px; margin:5px; border-radius:5px; border:none; }
    .chat-modal button { padding:5px 10px; margin:5px; border-radius:5px; border:none; background:#00f; color:#fff; cursor:pointer; }

  </style>
</head>
<body>

  <!-- Historias -->
  <div class="stories">
    <div class="story" onclick="openStory('img/foto1.jpg')">
      <img src="img/foto1.jpg" alt="Historia Alex">
      <p>Alex</p>
    </div>
    <div class="story" onclick="openStory('img/foto2.jpg')">
      <img src="img/foto2.jpg" alt="Historia Naunet">
      <p>Naunet</p>
    </div>
    <div class="story" onclick="openStory('img/foto3.jpg')">
      <img src="img/foto3.jpg" alt="Historia Amigo">
      <p>Amigo</p>
    </div>
  </div>

  <!-- Feed tipo TikTok -->
  <div class="feed">
    <div class="post">
      <video src="videos/video1.mp4" muted loop></video>
      <div class="info">@usuario1</div>
      <div class="actions">
        <button onclick="darLike(this)">‚ù§Ô∏è 0</button>
        <button onclick="alert('Comentarios üí¨')">üí¨</button>
        <button onclick="alert('Compartido ‚Ü™Ô∏è')">‚Ü™Ô∏è</button>
      </div>
    </div>
    <div class="post">
      <img src="img/foto1.jpg" alt="Foto">
      <div class="info">@usuario2</div>
      <div class="actions">
        <button onclick="darLike(this)">‚ù§Ô∏è 0</button>
        <button onclick="alert('Comentarios üí¨')">üí¨</button>
        <button onclick="alert('Compartido ‚Ü™Ô∏è')">‚Ü™Ô∏è</button>
      </div>
    </div>
  </div>

  <!-- Navbar -->
  <nav>
    <a href="#">üè†</a>
    <a href="#" onclick="toggleModal()">üîë</a>
    <a href="#">‚ûï</a>
    <a href="#">üîç</a>
    <a href="#">üë§</a>
  </nav>

  <!-- Modal login -->
  <div class="modal" id="loginModal">
    <div class="modal-content">
      <h2>Iniciar Sesi√≥n / Registrarse</h2>
      <input type="text" id="usuario" placeholder="Usuario"><br>
      <input type="email" id="email" placeholder="Correo electr√≥nico"><br>
      <button onclick="iniciarSesion()">Entrar</button>
    </div>
  </div>

  <!-- Modal historias -->
  <div class="story-modal" id="storyModal">
    <img id="storyImg" src="" alt="Historia">
  </div>

  <!-- Modal reels -->
  <div class="reel-modal" id="reelModal">
    <button class="close-btn" onclick="closeReel()">‚úñ</button>
    <video id="reelVideo" controls></video>
  </div>

  <!-- Chat -->
  <button class="chat-btn" onclick="toggleChat()">üí¨ Chat</button>
  <div class="chat-modal" id="chatModal">
    <div id="chatMensajes"></div>
    <input type="text" id="chatInput" placeholder="Escribe un mensaje...">
    <button onclick="enviarMensaje()">Enviar</button>
  </div>

  <script>
    const modal = document.getElementById("loginModal");
    const storyModal = document.getElementById("storyModal");
    const storyImg = document.getElementById("storyImg");
    const reelModal = document.getElementById("reelModal");
    const reelVideo = document.getElementById("reelVideo");
    const chatModal = document.getElementById("chatModal");
    const chatMensajes = document.getElementById("chatMensajes");

    // Detectar usuario registrado
    window.addEventListener("load", () => {
      const usuarioGuardado = localStorage.getItem("usuarioApp");
      if (!usuarioGuardado) {
        modal.classList.add("active");
      }
    });

    function iniciarSesion() {
      const usuarioInput = document.getElementById("usuario").value.trim();
      const emailInput = document.getElementById("email").value.trim();
      if (usuarioInput && emailInput) {
        localStorage.setItem("usuarioApp", JSON.stringify({ usuario:usuarioInput, email:emailInput }));
        alert(`Bienvenido ${usuarioInput} ‚ú®`);
        modal.classList.remove("active");
      } else {
        alert("Por favor completa ambos campos.");
      }
    }

    // Historias
    function openStory(src) {
      storyImg.src = src;
      storyModal.classList.add("active");
      setTimeout(() => { closeStory(); }, 4000);
    }
    function closeStory() { storyModal.classList.remove("active"); }

    // Reels
    function openReel(src) { reelVideo.src=src; reelVideo.play(); reelModal.classList.add("active"); }
    function closeReel() { reelVideo.pause(); reelModal.classList.remove("active"); }

    // Feed autoplay
    const videos = document.querySelectorAll(".feed video");
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if(entry.isIntersecting){ entry.target.play(); } else { entry.target.pause(); }
      });
    }, { threshold:0.7 });
    videos.forEach(video => { observer.observe(video); video.addEventListener("click",()=>openReel(video.src)); });

    // Likes
    function darLike(btn) {
      let count = parseInt(btn.innerText.split(' ')[1]);
      count++; btn.innerText=`‚ù§Ô∏è ${count}`;
    }

    // Chat
    function toggleChat() { chatModal.classList.toggle("active"); }
    function enviarMensaje() {
      const input = document.getElementById("chatInput");
      if(input.value.trim()) {
        const div = document.createElement("div");
        div.textContent = input.value;
        chatMensajes.appendChild(div);
        input.value = "";
        chatModal.scrollTop = chatModal.scrollHeight;
      }
    }

    // Animaci√≥n salida
    window.addEventListener("beforeunload", ()=>{ document.body.style.animation="fadeOut 1s ease"; });

  </script>
</body>
</html>
